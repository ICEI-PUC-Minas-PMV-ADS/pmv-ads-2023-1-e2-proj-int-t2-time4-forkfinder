@model List<ForkFinder.ViewModels.ReservaViewModel>

<div class="container text-center">
    <h2 class="mt-5">Registro de Reservas</h2>
    <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link text-warning" id="reserva-tab" data-bs-toggle="tab" data-bs-href="/Reservas/Index"
                    type="button" role="tab" aria-controls="reserva-tab-pane" aria-selected="false">
                Reservas em Análise
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link active text-warning" data-bs-toggle="tab" data-bs-href="/Reservas/RegistroReservas"
                    type="button" role="tab" aria-controls="reserva-tab-pane"
                    aria-selected="true">
                Registro de Reservas
            </button>
        </li>
    </ul>
    <div class="row">
        <div class="col">
            <h4>Reservas Aprovadas</h4>
            @if (Model.Any(r => r.Situacao == Situacao.Aprovada))
            {
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Data da Reserva</th>
                            <th>Cliente</th>
                            <th>Descrição</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var reserva in Model.Where(r => r.Situacao == Situacao.Aprovada).OrderByDescending(r => r.DataCriacao))
                        {
                            <tr>
                                <td>@reserva.Agenda.Data</td>
                                <td>@reserva.Cliente.Nome</td>
                                <td>@reserva.Descricao</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">Nenhuma reserva aprovada encontrada.</p>
            }
        </div>
        <div class="col">
            <h4>Reservas Reprovadas</h4>
            @if (Model.Any(r => r.Situacao == Situacao.Recusada))
            {
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Data da Reserva</th>
                            <th>Cliente</th>
                            <th>Descrição</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var reserva in Model.Where(r => r.Situacao == Situacao.Recusada).OrderByDescending(r => r.DataCriacao))
                        {
                            <tr>
                                <td>@reserva.Agenda.Data</td>
                                <td>@reserva.Cliente.Nome</td>
                                <td>@reserva.Descricao</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">Nenhuma reserva reprovada encontrada.</p>
            }
        </div>
    </div>
</div>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        $(document).ready(function () {
            $("#reserva-tab").on("click", function () {
                var href = $(this).data("bs-href");
                window.location.href = href;
            });
        });
    </script>
}